<!DOCTYPE html><html lang="zh-CN"><head hexo-theme="https://github.com/volantis-x/hexo-theme-volantis/#6.0.0-alpha.0"><meta name="generator" content="Hexo 7.0.0"><meta charset="utf-8"><link rel="canonical" href="https://inkss.cn/post/76993423/"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><link rel="apple-touch-icon" sizes="180x180" href="/icon/apple-touch-icon.png"><link rel="mask-icon" href="/icon/safari-pinned-tab.svg" color="#fbfcfc"><link rel="icon" type="image/svg+xml" href="/icon/favicon.svg"><link rel="icon" type="image/png" sizes="16x16" href="/icon/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/icon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="194x194" href="/icon/favicon-194x194.png"><link rel="icon" type="image/png" sizes="192x192" href="/icon/android-chrome-192x192.png"><link rel="manifest" href="/manifest.json"><meta name="apple-mobile-web-app-title" content="枋柚梓的猫会发光"><meta name="application-name" content="枋柚梓的猫会发光"><meta name="msapplication-TileImage" content="/icon/mstile-144x144.png"><meta name="msapplication-TileColor" content="#fbfcfc"><meta name="msapplication-config" content="/icons/browserconfig.xml"><meta name="theme-color" content="#fbfcfc"><script>const CHECKURL=window.location.href.replace("/blog/","/post/");window.location.href!==CHECKURL&&("undefined"==typeof pjax?window.location.href=CHECKURL:pjax?.loadUrl(CHECKURL))</script><link rel="preload" href="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/css/style.css" as="style"><link rel="alternate" href="/atom.xml" title="枋柚梓的猫会发光" type="application/atom+xml"><title>Volantis 主题部署 Pjax - 枋柚梓的猫会发光</title><meta name="keywords" content="Hexo,Pjax,Volantis,枋柚梓,博客,Inkss"><meta desc name="description" content="本篇文章记录了我对 Volantis 主题做 Pjax 兼容的种种，大抵算是种记录吧~ - 枋柚梓 - 枋柚梓的猫会发光"><meta property="og:type" content="article"><meta property="og:title" content="Volantis 主题部署 Pjax"><meta property="og:url" content="https://inkss.cn/post/76993423/"><meta property="og:site_name" content="枋柚梓的猫会发光"><meta property="og:description" content="本篇文章记录了我对 Volantis 主题做 Pjax 兼容的种种，大抵算是种记录吧~"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://inkss.cn/post/76993423/icon/android-chrome-192x192.png"><meta property="article:published_time" content="2020-05-16T17:27:00.000Z"><meta property="article:modified_time" content="2020-06-02T06:18:00.000Z"><meta property="article:author" content="枋柚梓"><meta property="article:tag" content="Hexo"><meta property="article:tag" content="Pjax"><meta property="article:tag" content="Volantis"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://inkss.cn/post/76993423/icon/android-chrome-192x192.png"><style>#safearea{display:none}.fa-duotone.red,.fa-light.red,.fa-regular.red,.fa-solid.red,.fa-thin.red,.fa.red,.fad.red,.fal.red,.far.red,.fas.red,.iziToast>.iziToast-body .iziToast-icon.red{color:#f44336}.fa-duotone.pink,.fa-light.pink,.fa-regular.pink,.fa-solid.pink,.fa-thin.pink,.fa.pink,.fad.pink,.fal.pink,.far.pink,.fas.pink,.iziToast>.iziToast-body .iziToast-icon.pink{color:#e91e63}.fa-duotone.purple,.fa-light.purple,.fa-regular.purple,.fa-solid.purple,.fa-thin.purple,.fa.purple,.fad.purple,.fal.purple,.far.purple,.fas.purple,.iziToast>.iziToast-body .iziToast-icon.purple{color:#9c27b0}.fa-duotone.indigo,.fa-light.indigo,.fa-regular.indigo,.fa-solid.indigo,.fa-thin.indigo,.fa.indigo,.fad.indigo,.fal.indigo,.far.indigo,.fas.indigo,.iziToast>.iziToast-body .iziToast-icon.indigo{color:#3f51b5}.fa-duotone.light-blue,.fa-light.light-blue,.fa-regular.light-blue,.fa-solid.light-blue,.fa-thin.light-blue,.fa.light-blue,.fad.light-blue,.fal.light-blue,.far.light-blue,.fas.light-blue,.iziToast>.iziToast-body .iziToast-icon.light-blue{color:#4ba7ee}.fa-duotone.deep-blue,.fa-light.deep-blue,.fa-regular.deep-blue,.fa-solid.deep-blue,.fa-thin.deep-blue,.fa.deep-blue,.fad.deep-blue,.fal.deep-blue,.far.deep-blue,.fas.deep-blue,.iziToast>.iziToast-body .iziToast-icon.deep-blue{color:#3367d6}.fa-duotone.teal,.fa-light.teal,.fa-regular.teal,.fa-solid.teal,.fa-thin.teal,.fa.teal,.fad.teal,.fal.teal,.far.teal,.fas.teal,.iziToast>.iziToast-body .iziToast-icon.teal{color:#009688}.fa-duotone.light-green,.fa-light.light-green,.fa-regular.light-green,.fa-solid.light-green,.fa-thin.light-green,.fa.light-green,.fad.light-green,.fal.light-green,.far.light-green,.fas.light-green,.iziToast>.iziToast-body .iziToast-icon.light-green{color:#8bc34a}.fa-duotone.orange,.fa-light.orange,.fa-regular.orange,.fa-solid.orange,.fa-thin.orange,.fa.orange,.fad.orange,.fal.orange,.far.orange,.fas.orange,.iziToast>.iziToast-body .iziToast-icon.orange{color:#ff9800}.fa-duotone.deep-orange,.fa-light.deep-orange,.fa-regular.deep-orange,.fa-solid.deep-orange,.fa-thin.deep-orange,.fa.deep-orange,.fad.deep-orange,.fal.deep-orange,.far.deep-orange,.fas.deep-orange,.iziToast>.iziToast-body .iziToast-icon.deep-orange{color:#ff5722}.fa-duotone.brown,.fa-light.brown,.fa-regular.brown,.fa-solid.brown,.fa-thin.brown,.fa.brown,.fad.brown,.fal.brown,.far.brown,.fas.brown,.iziToast>.iziToast-body .iziToast-icon.brown{color:#795548}.fa-duotone.blue-grey,.fa-light.blue-grey,.fa-regular.blue-grey,.fa-solid.blue-grey,.fa-thin.blue-grey,.fa.blue-grey,.fad.blue-grey,.fal.blue-grey,.far.blue-grey,.fas.blue-grey,.iziToast>.iziToast-body .iziToast-icon.blue-grey{color:#607d8b}.fa-duotone.yellow,.fa-light.yellow,.fa-regular.yellow,.fa-solid.yellow,.fa-thin.yellow,.fa.yellow,.fad.yellow,.fal.yellow,.far.yellow,.fas.yellow,.iziToast>.iziToast-body .iziToast-icon.yellow{color:#fcec60}.fa-duotone.TURQUOISE,.fa-light.TURQUOISE,.fa-regular.TURQUOISE,.fa-solid.TURQUOISE,.fa-thin.TURQUOISE,.fa.TURQUOISE,.fad.TURQUOISE,.fal.TURQUOISE,.far.TURQUOISE,.fas.TURQUOISE,.iziToast>.iziToast-body .iziToast-icon.TURQUOISE{color:#1abc9c}.fa-duotone.EMERALD,.fa-light.EMERALD,.fa-regular.EMERALD,.fa-solid.EMERALD,.fa-thin.EMERALD,.fa.EMERALD,.fad.EMERALD,.fal.EMERALD,.far.EMERALD,.fas.EMERALD,.iziToast>.iziToast-body .iziToast-icon.EMERALD{color:#2ecc71}.fa-duotone.PETERRIVE,.fa-light.PETERRIVE,.fa-regular.PETERRIVE,.fa-solid.PETERRIVE,.fa-thin.PETERRIVE,.fa.PETERRIVE,.fad.PETERRIVE,.fal.PETERRIVE,.far.PETERRIVE,.fas.PETERRIVE,.iziToast>.iziToast-body .iziToast-icon.PETERRIVE{color:#3498db}.fa-duotone.AMETHYST,.fa-light.AMETHYST,.fa-regular.AMETHYST,.fa-solid.AMETHYST,.fa-thin.AMETHYST,.fa.AMETHYST,.fad.AMETHYST,.fal.AMETHYST,.far.AMETHYST,.fas.AMETHYST,.iziToast>.iziToast-body .iziToast-icon.AMETHYST{color:#9b59b6}.fa-duotone.WETASPHALT,.fa-light.WETASPHALT,.fa-regular.WETASPHALT,.fa-solid.WETASPHALT,.fa-thin.WETASPHALT,.fa.WETASPHALT,.fad.WETASPHALT,.fal.WETASPHALT,.far.WETASPHALT,.fas.WETASPHALT,.iziToast>.iziToast-body .iziToast-icon.WETASPHALT{color:#34495e}.fa-duotone.GREENSEA,.fa-light.GREENSEA,.fa-regular.GREENSEA,.fa-solid.GREENSEA,.fa-thin.GREENSEA,.fa.GREENSEA,.fad.GREENSEA,.fal.GREENSEA,.far.GREENSEA,.fas.GREENSEA,.iziToast>.iziToast-body .iziToast-icon.GREENSEA{color:#16a085}.fa-duotone.NEPHRITIS,.fa-light.NEPHRITIS,.fa-regular.NEPHRITIS,.fa-solid.NEPHRITIS,.fa-thin.NEPHRITIS,.fa.NEPHRITIS,.fad.NEPHRITIS,.fal.NEPHRITIS,.far.NEPHRITIS,.fas.NEPHRITIS,.iziToast>.iziToast-body .iziToast-icon.NEPHRITIS{color:#27ae60}.fa-duotone.BELIZEHOLE,.fa-light.BELIZEHOLE,.fa-regular.BELIZEHOLE,.fa-solid.BELIZEHOLE,.fa-thin.BELIZEHOLE,.fa.BELIZEHOLE,.fad.BELIZEHOLE,.fal.BELIZEHOLE,.far.BELIZEHOLE,.fas.BELIZEHOLE,.iziToast>.iziToast-body .iziToast-icon.BELIZEHOLE{color:#2980b9}.fa-duotone.WISTERIA,.fa-light.WISTERIA,.fa-regular.WISTERIA,.fa-solid.WISTERIA,.fa-thin.WISTERIA,.fa.WISTERIA,.fad.WISTERIA,.fal.WISTERIA,.far.WISTERIA,.fas.WISTERIA,.iziToast>.iziToast-body .iziToast-icon.WISTERIA{color:#8e44ad}.fa-duotone.MIDNIGHTBLUE,.fa-light.MIDNIGHTBLUE,.fa-regular.MIDNIGHTBLUE,.fa-solid.MIDNIGHTBLUE,.fa-thin.MIDNIGHTBLUE,.fa.MIDNIGHTBLUE,.fad.MIDNIGHTBLUE,.fal.MIDNIGHTBLUE,.far.MIDNIGHTBLUE,.fas.MIDNIGHTBLUE,.iziToast>.iziToast-body .iziToast-icon.MIDNIGHTBLUE{color:#2c3e50}.fa-duotone.SUNFLOWER,.fa-light.SUNFLOWER,.fa-regular.SUNFLOWER,.fa-solid.SUNFLOWER,.fa-thin.SUNFLOWER,.fa.SUNFLOWER,.fad.SUNFLOWER,.fal.SUNFLOWER,.far.SUNFLOWER,.fas.SUNFLOWER,.iziToast>.iziToast-body .iziToast-icon.SUNFLOWER{color:#f1c40f}.fa-duotone.CARROT,.fa-light.CARROT,.fa-regular.CARROT,.fa-solid.CARROT,.fa-thin.CARROT,.fa.CARROT,.fad.CARROT,.fal.CARROT,.far.CARROT,.fas.CARROT,.iziToast>.iziToast-body .iziToast-icon.CARROT{color:#e67e22}.fa-duotone.ALIZARIN,.fa-light.ALIZARIN,.fa-regular.ALIZARIN,.fa-solid.ALIZARIN,.fa-thin.ALIZARIN,.fa.ALIZARIN,.fad.ALIZARIN,.fal.ALIZARIN,.far.ALIZARIN,.fas.ALIZARIN,.iziToast>.iziToast-body .iziToast-icon.ALIZARIN{color:#e74c3c}.fa-duotone.CLOUDS,.fa-light.CLOUDS,.fa-regular.CLOUDS,.fa-solid.CLOUDS,.fa-thin.CLOUDS,.fa.CLOUDS,.fad.CLOUDS,.fal.CLOUDS,.far.CLOUDS,.fas.CLOUDS,.iziToast>.iziToast-body .iziToast-icon.CLOUDS{color:#ecf0f1}.fa-duotone.CONCRETE,.fa-light.CONCRETE,.fa-regular.CONCRETE,.fa-solid.CONCRETE,.fa-thin.CONCRETE,.fa.CONCRETE,.fad.CONCRETE,.fal.CONCRETE,.far.CONCRETE,.fas.CONCRETE,.iziToast>.iziToast-body .iziToast-icon.CONCRETE{color:#95a5a6}.fa-duotone.ORANGE,.fa-light.ORANGE,.fa-regular.ORANGE,.fa-solid.ORANGE,.fa-thin.ORANGE,.fa.ORANGE,.fad.ORANGE,.fal.ORANGE,.far.ORANGE,.fas.ORANGE,.iziToast>.iziToast-body .iziToast-icon.ORANGE{color:#f39c12}.fa-duotone.PUMPKIN,.fa-light.PUMPKIN,.fa-regular.PUMPKIN,.fa-solid.PUMPKIN,.fa-thin.PUMPKIN,.fa.PUMPKIN,.fad.PUMPKIN,.fal.PUMPKIN,.far.PUMPKIN,.fas.PUMPKIN,.iziToast>.iziToast-body .iziToast-icon.PUMPKIN{color:#d35400}.fa-duotone.POMEGRANATE,.fa-light.POMEGRANATE,.fa-regular.POMEGRANATE,.fa-solid.POMEGRANATE,.fa-thin.POMEGRANATE,.fa.POMEGRANATE,.fad.POMEGRANATE,.fal.POMEGRANATE,.far.POMEGRANATE,.fas.POMEGRANATE,.iziToast>.iziToast-body .iziToast-icon.POMEGRANATE{color:#c0392b}.fa-duotone.SILVER,.fa-light.SILVER,.fa-regular.SILVER,.fa-solid.SILVER,.fa-thin.SILVER,.fa.SILVER,.fad.SILVER,.fal.SILVER,.far.SILVER,.fas.SILVER,.iziToast>.iziToast-body .iziToast-icon.SILVER{color:#bdc3c7}.fa-duotone.ASBESTOS,.fa-light.ASBESTOS,.fa-regular.ASBESTOS,.fa-solid.ASBESTOS,.fa-thin.ASBESTOS,.fa.ASBESTOS,.fad.ASBESTOS,.fal.ASBESTOS,.far.ASBESTOS,.fas.ASBESTOS,.iziToast>.iziToast-body .iziToast-icon.ASBESTOS{color:#7f8c8d}.article-title,.md .footer .header,.meta-v3,.new-meta-box,.prev-next,.widget header,details summary{font-family:LXGW WenKai,PingFang SC,Microsoft YaHei,SimHei,Arial,SimSun,Helvetica,monospace}:root{--color-site-body:#f4f4f4;--color-site-bg:#f4f4f4;--color-site-inner:#fff;--color-site-footer:#666;--color-card:#fff;--color-text:#444;--color-block:#f4f4f4;--color-inlinecode:#444;--color-codeblock:#f4f4f4;--color-h1:#3a3a3a;--color-h2:#3a3a3a;--color-h3:#333;--color-h4:#444;--color-h5:#555;--color-h6:#666;--color-p:#444;--color-list:#666;--color-list-hl:#30ad91;--color-meta:#888;--color-read-bkg:#e0d8c8;--color-read-post:#f8f1e2;--color-copyright-bkg:#f5f5f5;--color-white-png:#fff;--color-img-error:#f5f5f5}*{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;outline:0;margin:0;padding:0}::-webkit-scrollbar{height:4px;width:4px}::-webkit-scrollbar-track-piece{background:0 0}::-webkit-scrollbar-thumb{background:#3dd9b6;cursor:pointer;border-radius:2px;-webkit-border-radius:2px}::-webkit-scrollbar-thumb:hover{background:#ff5722}html{color:var(--color-text);width:100%;height:100%;font-family:LXGW WenKai,-apple-system,SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif,Menlo,Monaco,monospace,sans-serif;font-size:16px}html>::-webkit-scrollbar{height:4px;width:4px}html>::-webkit-scrollbar-track-piece{background:0 0}html>::-webkit-scrollbar-thumb{background:#3dd9b6;cursor:pointer;border-radius:2px;-webkit-border-radius:2px}html>::-webkit-scrollbar-thumb:hover{background:#ff5722}body{background-color:var(--color-site-body);text-rendering:optimizelegibility;-webkit-tap-highlight-color:transparent;line-height:1.6;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.modal-active{overflow:hidden}@media screen and (max-width:680px){body.modal-active{position:fixed;top:0;right:0;bottom:0;left:0}}a{color:#2092ec;cursor:pointer;text-decoration:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}a:active,a:hover{outline:0}ol,ul{padding-left:0}ol li,ul li{list-style:none}header{display:block}img{border:0;background:0 0;max-width:100%}svg:not(:root){overflow:hidden}hr{-moz-box-sizing:content-box;box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;height:0;border:0;border-radius:1px;-webkit-border-radius:1px;border-bottom:1px solid rgba(68,68,68,.1)}article hr{background-image:none;height:2em;border:none;margin:1em 0 1em;text-align:center}article hr:after{content:"···";letter-spacing:2em;padding-left:2em;font-weight:700}button,input{color:inherit;font:inherit;margin:0}button{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}@supports (backdrop-filter:blur(20px)){.blur{background:rgba(255,255,255,.9)!important;backdrop-filter:saturate(200%) blur(20px)}}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.shadow.floatable{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.shadow.floatable:hover{box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1)}#l_cover{min-height:64px}.cover-wrapper{top:0;left:0;max-width:100%;height:100vh;display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;align-self:center;align-content:center;color:var(--color-site-inner);padding:0 16px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;overflow:hidden;margin-bottom:-100px}.cover-wrapper .cover-bg{position:absolute;width:100%;height:100%;background-position:center;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover}.cover-wrapper .cover-bg.lazyload:not(.loaded){opacity:0;-webkit-opacity:0;-moz-opacity:0}.cover-wrapper .cover-bg.lazyload.loaded{animation-delay:0s;animation-duration:.5s;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-name:fadeIn}@-moz-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{z-index:1;position:relative;width:100%;height:100%}.cover-wrapper#full{height:calc(100vh + 100px);padding-bottom:100px}.cover-wrapper#half{max-height:640px;min-height:460px;height:calc(36vh - 64px + 200px)}.cover-wrapper #scroll-down{width:100%;height:64px;position:absolute;bottom:100px;text-align:center;cursor:pointer}.cover-wrapper #scroll-down .scroll-down-effects{color:#fff;font-size:24px;line-height:64px;position:absolute;width:24px;left:calc(50% - 12px);text-shadow:0 1px 2px rgba(0,0,0,.1);animation:scroll-down-effect 1.5s infinite;-webkit-animation:scroll-down-effect 1.5s infinite;-khtml-animation:scroll-down-effect 1.5s infinite;-moz-animation:scroll-down-effect 1.5s infinite;-o-animation:scroll-down-effect 1.5s infinite;-ms-animation:scroll-down-effect 1.5s infinite}@-moz-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:0.4;-moz-opacity:0.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:0.4;-moz-opacity:0.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:0.4;-moz-opacity:0.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:0.4;-moz-opacity:0.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{margin-top:64px;margin-bottom:120px}.cover-wrapper .cover-body,.cover-wrapper .cover-body .bottom,.cover-wrapper .cover-body .top{display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;max-width:100%}.cover-wrapper .cover-body .bottom{margin-top:32px}.cover-wrapper .cover-body .title{font-family:LXGW WenKai,PingFang SC,Microsoft YaHei,SimHei,Arial,SimSun,Helvetica,monospace;font-size:3.125rem;text-shadow:0 1px 2px rgba(0,0,0,.1);text-align:center}.cover-wrapper .cover-body .subtitle{font-size:16px}.cover-wrapper .cover-body .logo{max-height:120px;max-width:calc(100% - 4 * 16px)}@media screen and (min-height:1024px){.cover-wrapper .cover-body .title{font-size:3rem}.cover-wrapper .cover-body .subtitle{font-size:.875rem}.cover-wrapper .cover-body .logo{max-height:150px}}.cover-wrapper .cover-body .m_search{position:relative;max-width:calc(100% - 16px);width:320px;vertical-align:middle}.cover-wrapper .cover-body .m_search .form{position:relative;display:block;width:100%}.cover-wrapper .cover-body .m_search .icon,.cover-wrapper .cover-body .m_search .input{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.cover-wrapper .cover-body .m_search .icon{position:absolute;display:block;line-height:2.5rem;width:32px;top:0;left:5px;color:rgba(68,68,68,.75)}.cover-wrapper .cover-body .m_search .input{display:block;height:2.5rem;width:100%;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;font-size:.875rem;-webkit-appearance:none;padding-left:36px;border-radius:1.4rem;-webkit-border-radius:1.4rem;background:rgba(255,255,255,.6);backdrop-filter:blur(10px);border:none;color:var(--color-text)}@media screen and (max-width:500px){.cover-wrapper .cover-body .m_search .input{padding-left:36px}}.cover-wrapper .cover-body .m_search .input:hover{background:rgba(255,255,255,.8)}.cover-wrapper .cover-body .m_search .input:focus{background:#fff}.cover-wrapper .list-h{display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;flex-wrap:wrap;-webkit-flex-wrap:wrap;-khtml-flex-wrap:wrap;-moz-flex-wrap:wrap;-o-flex-wrap:wrap;-ms-flex-wrap:wrap;align-items:stretch;border-radius:4px;-webkit-border-radius:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.cover-wrapper .list-h a{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 0;-ms-flex:1 0;flex:1 0;display:flex;font-weight:600}.cover-wrapper .list-h a img{display:block;border-radius:2px;-webkit-border-radius:2px;margin:4px;min-width:40px;max-width:44px}@media screen and (max-width:768px){.cover-wrapper .list-h a img{min-width:36px;max-width:40px}}@media screen and (max-width:500px){.cover-wrapper .list-h a img{margin:2px 4px;min-width:32px;max-width:36px}}@media screen and (max-width:375px){.cover-wrapper .list-h a img{min-width:28px;max-width:32px}}.cover-wrapper{max-width:100%}.cover-wrapper.search .bottom .menu{margin-top:8px}.cover-wrapper.search .bottom .menu .list-h a{white-space:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;align-items:baseline;padding:2px;margin:4px;color:var(--color-site-inner);opacity:.75;-webkit-opacity:0.75;-moz-opacity:0.75;text-shadow:0 1px 2px rgba(0,0,0,.05);border-bottom:2px solid transparent}.cover-wrapper.search .bottom .menu .list-h a i{margin-right:4px}.cover-wrapper.search .bottom .menu .list-h a p{font-size:.9375rem}.cover-wrapper.search .bottom .menu .list-h a.active,.cover-wrapper.search .bottom .menu .list-h a:active,.cover-wrapper.search .bottom .menu .list-h a:hover{opacity:1;-webkit-opacity:1;-moz-opacity:1;border-bottom:2px solid var(--color-site-inner)}.cover-wrapper.dock .menu,.cover-wrapper.featured .menu,.cover-wrapper.focus .menu{border-radius:12px;-webkit-border-radius:12px}.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;padding:8px 12px;line-height:24px;border-radius:12px;-webkit-border-radius:12px;border-bottom:none;text-align:center;align-content:flex-end;color:rgba(68,68,68,.7);font-size:1.5rem}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{padding:12px 8px}}.cover-wrapper.dock .menu .list-h a i,.cover-wrapper.featured .menu .list-h a i,.cover-wrapper.focus .menu .list-h a i{margin:8px}.cover-wrapper.dock .menu .list-h a p,.cover-wrapper.featured .menu .list-h a p,.cover-wrapper.focus .menu .list-h a p{font-size:.875rem}.cover-wrapper.dock .menu .list-h a.active,.cover-wrapper.featured .menu .list-h a.active,.cover-wrapper.focus .menu .list-h a.active{background:var(--color-card);backdrop-filter:none}.cover-wrapper.dock .menu .list-h a.active i,.cover-wrapper.dock .menu .list-h a.active i+p,.cover-wrapper.featured .menu .list-h a.active i,.cover-wrapper.featured .menu .list-h a.active i+p,.cover-wrapper.focus .menu .list-h a.active i,.cover-wrapper.focus .menu .list-h a.active i+p{color:#3dd9b6}.cover-wrapper.dock .menu .list-h a.active img+p,.cover-wrapper.featured .menu .list-h a.active img+p,.cover-wrapper.focus .menu .list-h a.active img+p{color:var(--color-text)}.cover-wrapper.dock .menu .list-h a:hover,.cover-wrapper.featured .menu .list-h a:hover,.cover-wrapper.focus .menu .list-h a:hover{background:var(--color-card)}.cover-wrapper.dock .top{margin-bottom:48px}.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);position:absolute;bottom:0;max-width:100%}.cover-wrapper.dock .menu .list-h{flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;margin:4px}.cover-wrapper.dock .menu .list-h a+a{margin-left:4px}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h{overflow-x:scroll}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar{height:0;width:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece{background:0 0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb{background:#3dd9b6;cursor:pointer;border-radius:0;-webkit-border-radius:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover{background:#ff5722}}@supports (backdrop-filter:blur(20px)){.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(6px)}}@media (prefers-color-scheme:dark){:root{--color-mode:'dark'}:root:not([color-scheme]){--color-site-body:#121212;--color-read-bkg:#1f1f1f;--color-read-post:#262626;--color-site-bg:#1f1f1f;--color-site-inner:rgba(238,238,238,0.871);--color-site-footer:rgba(170,170,170,0.871);--color-card:#262626;--color-text:rgba(238,238,238,0.871);--color-block:#171718;--color-codeblock:#1f1f1f;--color-inlinecode:#d56d28;--color-h1:rgba(255,255,255,0.871);--color-h2:rgba(255,255,255,0.871);--color-h3:rgba(255,255,255,0.6);--color-h4:rgba(255,255,255,0.6);--color-h5:rgba(255,255,255,0.6);--color-h6:rgba(255,255,255,0.6);--color-p:rgba(217,217,217,0.871);--color-list:rgba(217,217,217,0.871);--color-list-hl:#63e0c4;--color-meta:rgba(191,191,191,0.871);--color-link:rgba(191,191,191,0.871);--color-copyright-bkg:#1f1f1f;--color-white-png:#b2b2b2;--color-img-error:#21252b}:root:not([color-scheme]) img{filter:brightness(70%)!important}:root:not([color-scheme]) .blur{background:rgba(31,31,31,.9)!important}:root:not([color-scheme]) .white-box.blur{background:rgba(38,38,38,.9)!important}:root:not([color-scheme]) .nav-main .u-search-input{background:var(--color-card)!important}:root:not([color-scheme]) #l_main .article .prev-next>a{background:var(--color-card)!important}:root:not([color-scheme]) #l_main .article .prev-next>a:hover{background:var(--color-site-bg)!important}:root:not([color-scheme]) .article blockquote,:root:not([color-scheme]) .references,:root:not([color-scheme]) .related_posts{background:var(--color-card)!important}:root:not([color-scheme]) .article-title a{color:var(--color-h1)!important}:root:not([color-scheme]) details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) #u-search .modal,:root:not([color-scheme]) #u-search .modal-body,:root:not([color-scheme]) #u-search .modal-header{background:var(--color-card)!important}:root:not([color-scheme]) #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}:root:not([color-scheme]) .u-search-input:hover{background:var(--color-block)!important}:root:not([color-scheme]) .u-search-input:focus{background:var(--color-site-body)!important}}[color-scheme=dark]{--color-site-body:#121212;--color-read-bkg:#1f1f1f;--color-read-post:#262626;--color-site-bg:#1f1f1f;--color-site-inner:rgba(238,238,238,0.871);--color-site-footer:rgba(170,170,170,0.871);--color-card:#262626;--color-text:rgba(238,238,238,0.871);--color-block:#171718;--color-codeblock:#1f1f1f;--color-inlinecode:#d56d28;--color-h1:rgba(255,255,255,0.871);--color-h2:rgba(255,255,255,0.871);--color-h3:rgba(255,255,255,0.6);--color-h4:rgba(255,255,255,0.6);--color-h5:rgba(255,255,255,0.6);--color-h6:rgba(255,255,255,0.6);--color-p:rgba(217,217,217,0.871);--color-list:rgba(217,217,217,0.871);--color-list-hl:#63e0c4;--color-meta:rgba(191,191,191,0.871);--color-link:rgba(191,191,191,0.871);--color-copyright-bkg:#1f1f1f;--color-white-png:#b2b2b2;--color-img-error:#21252b}[color-scheme=dark] img{filter:brightness(70%)!important}[color-scheme=dark] .blur{background:rgba(31,31,31,.9)!important}[color-scheme=dark] .white-box.blur{background:rgba(38,38,38,.9)!important}[color-scheme=dark] .nav-main .u-search-input{background:var(--color-card)!important}[color-scheme=dark] #l_main .article .prev-next>a{background:var(--color-card)!important}[color-scheme=dark] #l_main .article .prev-next>a:hover{background:var(--color-site-bg)!important}[color-scheme=dark] .article blockquote,[color-scheme=dark] .references,[color-scheme=dark] .related_posts{background:var(--color-card)!important}[color-scheme=dark] .article-title a{color:var(--color-h1)!important}[color-scheme=dark] details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}[color-scheme=dark] details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}[color-scheme=dark] #u-search .modal,[color-scheme=dark] #u-search .modal-body,[color-scheme=dark] #u-search .modal-header{background:var(--color-card)!important}[color-scheme=dark] #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}[color-scheme=dark] .u-search-input:hover{background:var(--color-block)!important}[color-scheme=dark] .u-search-input:focus{background:var(--color-site-body)!important}@media screen and (max-width:500px){[color-scheme=dark] .l_header .m_search{background:var(--color-site-bg)!important}}@font-face{font-family:UbuntuMono;src:url("");font-weight:'normal';font-style:'normal';font-display:swap}@font-face{font-family:'Varela Round';src:url("");font-weight:'normal';font-style:'normal';font-display:swap}.l_header{position:fixed;z-index:1000;top:0;width:100%;height:64px;background:var(--color-card);box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.l_header.auto{transition:opacity .4s ease;-webkit-transition:opacity .4s ease;-khtml-transition:opacity 0.4s ease;-moz-transition:opacity .4s ease;-o-transition:opacity .4s ease;-ms-transition:opacity .4s ease;visibility:hidden}.l_header.auto.show{opacity:1!important;-webkit-opacity:1!important;-moz-opacity:1!important;visibility:visible}.l_header .container{margin-left:16px;margin-right:16px}.l_header #wrapper{height:100%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.l_header #wrapper .nav-main,.l_header #wrapper .nav-sub{display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;justify-content:space-between;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-o-justify-content:space-between;-ms-justify-content:space-between;align-items:center}.l_header #wrapper .nav-main{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header #wrapper.sub .nav-main{transform:translateY(-64px);-webkit-transform:translateY(-64px);-khtml-transform:translateY(-64px);-moz-transform:translateY(-64px);-o-transform:translateY(-64px);-ms-transform:translateY(-64px)}.l_header #wrapper .nav-sub{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;opacity:0;-webkit-opacity:0;-moz-opacity:0;height:64px;width:calc(100% - 2 * 16px);position:absolute}.l_header #wrapper .nav-sub ::-webkit-scrollbar{display:none}@media screen and (min-width:2048px){.l_header #wrapper .nav-sub{max-width:55vw;margin:auto}}.l_header #wrapper.sub .nav-sub{opacity:1;-webkit-opacity:1;-moz-opacity:1}.l_header #wrapper .title{position:relative;color:var(--color-text);padding-left:24px;max-height:64px}.l_header #wrapper .nav-main .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;line-height:64px;padding:0 8px;font-size:1.25rem;font-family:LXGW WenKai,PingFang SC,Microsoft YaHei,SimHei,Arial,SimSun,Helvetica,monospace}.l_header #wrapper .nav-main .title img{height:64px;padding:8px}@media screen and (max-width:500px){.l_header #wrapper .nav-main .title img{display:none}}@media screen and (min-width:500px){.l_header #wrapper .nav-main .title span{display:none}}.l_header .nav-sub{max-width:1080px;margin:auto}.l_header .nav-sub .title{font-weight:700;font-family:LXGW WenKai,-apple-system,SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif,Menlo,Monaco,monospace,sans-serif;line-height:1.2;max-height:64px;white-space:normal;flex-shrink:1}.l_header .switcher{display:none;line-height:64px;align-items:center}.l_header .switcher .s-toc{display:none}@media screen and (max-width:768px){.l_header .switcher .s-toc{display:flex}}.l_header .switcher>li{height:48px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;margin:2px}@media screen and (max-width:500px){.l_header .switcher>li{margin:0 1px;height:48px}}.l_header .switcher>li>a{display:flex;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;align-items:center;width:48px;height:48px;padding:.85em 1.1em;border-radius:100px;-webkit-border-radius:100px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;color:#3dd9b6}.l_header .switcher>li>a:hover{border:none}.l_header .switcher>li>a.active,.l_header .switcher>li>a:active{border:none;background:var(--color-site-bg)}@media screen and (max-width:500px){.l_header .switcher>li>a{width:36px;height:48px}}.l_header .nav-sub .switcher{display:flex}.l_header .m_search{display:flex;height:64px;width:240px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (max-width:1024px){.l_header .m_search{width:44px;min-width:44px}.l_header .m_search input::placeholder{opacity:0;-webkit-opacity:0;-moz-opacity:0}.l_header .m_search:hover{width:240px}.l_header .m_search:hover input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (min-width:500px){.l_header .m_search:hover .input{width:100%}.l_header .m_search:hover .input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (max-width:500px){.l_header .m_search{min-width:0}.l_header .m_search input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.l_header .m_search .form{position:relative;display:flex;width:100%;align-items:center}.l_header .m_search .icon{position:absolute;width:36px;left:5px;color:var(--color-meta)}@media screen and (max-width:500px){.l_header .m_search .icon{display:none}}.l_header .m_search .input{display:block;padding-top:8px;padding-bottom:8px;line-height:1.3;width:100%;color:var(--color-text);background:#fafafa;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;padding-left:40px;font-size:.875rem;border-radius:8px;-webkit-border-radius:8px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (min-width:500px){.l_header .m_search .input:focus{box-shadow:0 4px 8px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.1)}}@media screen and (max-width:500px){.l_header .m_search .input{background:var(--color-block);padding-left:8px;border:none}.l_header .m_search .input:focus,.l_header .m_search .input:hover{border:none}}@media (max-width:500px){.l_header .m_search{left:0;width:0;overflow:hidden;position:absolute;background:#fff;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header .m_search .input{border-radius:32px;-webkit-border-radius:32px;margin-left:16px;padding-left:16px}.l_header.z_search-open .m_search{width:100%}.l_header.z_search-open .m_search .input{width:calc(100% - 120px)}}ul.list-v li:hover>ul.list-v,ul.m-pc li:hover>ul.list-v{display:block}ul.nav-list-h{display:flex;align-items:stretch}ul.nav-list-h>li{position:relative;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;height:100%;line-height:2.4;border-radius:4px;-webkit-border-radius:4px}ul.nav-list-h>li>a{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}ul.nav-list-h>li>a span{font-weight:600}ul.list-v{z-index:1;display:none;position:absolute;background:var(--color-card);box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);margin-top:-6px;border-radius:4px;-webkit-border-radius:4px;padding:8px 0}ul.list-v.show{display:block}ul.list-v hr{margin-top:8px;margin-bottom:8px}ul.list-v>li{white-space:nowrap;word-break:keep-all}ul.list-v>li.header{font-size:.78125rem;font-weight:700;line-height:2em;color:var(--color-meta);margin:8px 16px 4px}ul.list-v>li.header i{margin-right:8px}ul.list-v>li ul{margin-left:0;display:none;margin-top:-40px}ul.list-v .aplayer-container{min-height:64px;padding:6px 16px}ul.list-v>li>a{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;display:block;color:var(--color-list);font-size:.875rem;line-height:36px;padding:0 20px 0 16px;text-overflow:ellipsis;margin:0 4px;border-radius:4px;-webkit-border-radius:4px}@media screen and (max-width:1024px){ul.list-v>li>a{line-height:40px}}ul.list-v>li>a>i{margin-right:8px}ul.list-v>li>a.active,ul.list-v>li>a:active{color:var(--color-list-hl)}ul.list-v>li>a:hover{color:var(--color-list-hl);background:var(--color-site-bg)}.l_header .menu>ul>li>a{display:block;padding:0 8px;display:flex}.l_header .menu>ul>li>a .icon{width:16px;margin-right:6px}.l_header .menu>ul>li>a .icon i{display:inline-block}.l_header .menu>ul>li>ul .icon{width:16px;margin-right:2px}.l_header .menu>ul>li>ul .icon i{display:inline-block}.l_header ul.nav-list-h>li{color:var(--color-list);line-height:64px}.l_header ul.nav-list-h>li>a{max-height:64px;overflow:hidden;color:inherit}.l_header ul.nav-list-h>li>a.active span,.l_header ul.nav-list-h>li>a:active span{color:#3dd9b6}.l_header ul.nav-list-h>li:hover>a{color:var(--color-list-hl)}.l_header ul.nav-list-h>li i.music{animation:rotate-effect 1.5s linear infinite;-webkit-animation:rotate-effect 1.5s linear infinite;-khtml-animation:rotate-effect 1.5s linear infinite;-moz-animation:rotate-effect 1.5s linear infinite;-o-animation:rotate-effect 1.5s linear infinite;-ms-animation:rotate-effect 1.5s linear infinite}@-moz-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-webkit-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-o-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}.menu-phone li ul.list-v{right:calc(100% - .5 * 16px)}.menu-phone li ul.list-v ul{right:calc(100% - .5 * 16px)}#wrapper{max-width:1080px;margin:auto}@media screen and (min-width:2048px){#wrapper{max-width:55vw}}#wrapper .menu{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;margin:0 16px 0 0}#wrapper .menu .list-v ul{left:calc(100% - .5 * 16px)}.menu-phone{display:none;margin-top:16px;right:8px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all 0.28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.menu-phone ul{right:calc(100% - .5 * 16px)}@media screen and (max-width:500px){.menu-phone{display:block}}.l_header{max-width:65vw;left:calc((100% - 65vw) * .5);border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media screen and (max-width:2048px){.l_header{max-width:1112px;left:calc((100% - 1112px) * .5)}}@media screen and (max-width:1112px){.l_header{left:0;border-radius:0;-webkit-border-radius:0;max-width:100%}}@media screen and (max-width:500px){.l_header .container{margin-left:0;margin-right:0}.l_header #wrapper .nav-main .title{padding-left:16px;padding-right:16px}.l_header #wrapper .nav-sub{width:100%}.l_header #wrapper .nav-sub .title{overflow-y:scroll;margin-top:2px;padding:8px 16px}.l_header #wrapper .switcher{display:flex;margin-right:8px;height:64px}.l_header .menu{display:none}}@media screen and (max-width:500px){.list-v li{max-width:270px}}#u-search{display:none;position:fixed;top:0;left:0;width:100%;height:100%;padding:60px 20px;z-index:1001}@media screen and (max-width:680px){#u-search{padding:0}}@media screen and (prefers-color-scheme:dark) and (max-width:500px){.l_header .m_search{background:var(--color-site-bg)!important}}@media screen and (max-width:500px){#safearea{margin:0!important;box-shadow:none;-webkit-box-shadow:none}#safearea .body-wrapper{padding:0}#safearea #l_main{padding-left:0}#safearea #l_main article#arc,#safearea #l_main article#comments,#safearea #l_main article#friends,#safearea #l_main article#page,#safearea #l_main article#post{border-radius:0;-webkit-border-radius:0}#safearea #l_main article#cat,#safearea #l_main article#tag{margin:0;border-radius:0;-webkit-border-radius:0}#safearea #l_main .post-wrapper{margin:0 0 16px}#safearea #l_main .post-wrapper .post{border-radius:0;-webkit-border-radius:0}#safearea #l_side .widget.mobile{border-radius:0;-webkit-border-radius:0}}.iconfont{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.iconfont.emoji{width:1.5em;height:1.5em;vertical-align:-.3em}@media screen and (max-width:500px){.cover-wrapper .cover-body .title{font-size:2rem}}#l_main>article.cus-indent p img{display:block}#l_main>article.cus-indent div.checkbox p{text-indent:0}#l_main>article.cus-indent p+ul{margin-left:2rem}.widget.list .content a>div.name{font-weight:initial}html.grayscale::before{content:"";position:absolute;inset:0;backdrop-filter:grayscale(95%);z-index:5000;pointer-events:none}.widget-sticky{top:16px!important}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/css/style.css" media="print" onload='this.media="all",this.onload=null'><noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/css/style.css"></noscript><script>let userColorScheme=localStorage.getItem("color-scheme");userColorScheme&&document.documentElement.setAttribute("color-scheme",userColorScheme),document.addEventListener("error",(function(e){const t=e.target,a=e.target.parentElement,r=a.classList.toString(),s=a.parentElement.classList.toString();"img"===t.tagName.toLowerCase()&&(t.classList.add("fix-cursor-default","error"),"fancybox"===r&&"fancybox"===s?(a.parentElement.classList.add("hideFancybox"),a.parentElement.classList.remove("fancybox"),a.classList.remove("fancybox")):"img-bg"===r&&"img-wrap"===s?a.parentElement.classList.add("hideFancybox"):"author"===r?a.parentElement.classList.add("fix-author-imgError"):-1!=r.indexOf("tk-avatar")&&a.parentElement.classList.add("fix-avatar-imgError"))}),!0)</script><script>function volantisEventListener(e,t,l){this.type=e,this.f=t,this.ele=l}function volantisDom(e){return e||(e=document.createElement("div")),this.ele=e,this.ele.find=e=>{let t=this.ele.querySelector(e);if(t)return new volantisDom(t)},this.ele.hasClass=e=>this.ele.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")),this.ele.addClass=e=>(this.ele.classList.add(e),this.ele),this.ele.removeClass=e=>(this.ele.classList.remove(e),this.ele),this.ele.toggleClass=e=>(this.ele.hasClass(e)?this.ele.removeClass(e):this.ele.addClass(e),this.ele),this.ele.on=(e,t,l=1)=>(this.ele.addEventListener(e,t,!1),l&&volantis.EventListener.list.push(new volantisEventListener(e,t,this.ele)),this.ele),this.ele.click=(e,t)=>(this.ele.on("click",e,t),this.ele),this.ele.scroll=(e,t)=>(this.ele.on("scroll",e,t),this.ele),this.ele.html=e=>(this.ele.innerHTML=e,this.ele),this.ele.hide=e=>(this.ele.style.display="none",this.ele),this.ele.show=e=>(this.ele.style.display="block",this.ele),this.ele}function RunItem(){function e(e,t){this.name=t||e.name,this.run=()=>{try{e()}catch(e){console.log(e)}}}this.list=[],this.start=()=>{for(var e=0;e<this.list.length;e++)this.list[e].run()},this.push=(t,l,n=!0)=>{let o=t;n&&(o=()=>{volantis.requestAnimationFrame(t)});var s=new e(o,l);this.list.push(s)},this.remove=e=>{for(let t=0;t<this.list.length;t++){this.list[t].name==e&&this.list.splice(t,1)}}}function errorImgAvatar(e){e.src="/img/default/avatar.svg",e.onerror=null}function errorImgCover(e){e.src="/img/default/cover.svg",e.onerror=null}window.volantis={},volantis.debug="false",volantis.dom={},volantis.EventListener={},volantis.EventListener.list=[],volantis.EventListener.remove=()=>{volantis.EventListener.list.forEach((function(e){e.ele.removeEventListener(e.type,e.f,!1)})),volantis.EventListener.list=[]},volantis.dom.$=e=>e?new volantisDom(e):null,volantis.pjax={},volantis.pjax.method={complete:new RunItem,error:new RunItem,send:new RunItem},volantis.pjax=Object.assign(volantis.pjax,{push:volantis.pjax.method.complete.push,error:volantis.pjax.method.error.push,send:volantis.pjax.method.send.push}),volantis.rightmenu={},volantis.rightmenu.method={handle:new RunItem},volantis.rightmenu=Object.assign(volantis.rightmenu,{handle:volantis.rightmenu.method.handle.push}),volantis.dark={},volantis.dark.method={toggle:new RunItem},volantis.dark=Object.assign(volantis.dark,{push:volantis.dark.method.toggle.push}),volantis.js=(e,t)=>new Promise((l=>{setTimeout((function(){var n=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");if(o.setAttribute("type","text/javascript"),t)if(JSON.stringify(t))for(let e in t)"onload"==e?o[e]=()=>{t[e](),l()}:(o[e]=t[e],o.onload=l);else o.onload=()=>{t(),l()};else o.onload=l;o.setAttribute("src",e),n.appendChild(o)}))})),volantis.css=e=>new Promise((t=>{setTimeout((function(){var l=document.createElement("link");l.rel="stylesheet",l.href=e,l.onload=t,document.getElementsByTagName("head")[0].appendChild(l)}))})),volantis.import={jQuery:()=>"undefined"==typeof jQuery?volantis.js("https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"):new Promise((e=>{e()}))},volantis.requestAnimationFrame=e=>{window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame),window.requestAnimationFrame(e)},volantis.layoutHelper=(e,t,l)=>{function n(e,t,l){volantis.tempDiv=document.createElement("div"),volantis.tempDiv.innerHTML=t;let n=document.querySelector("#layoutHelper-"+e);n&&(l&&(n.innerHTML=""),n.append(volantis.tempDiv))}l=Object.assign({clean:!1,pjax:!0},l),n(e,t,l.clean),l.pjax&&volantis.pjax.push((()=>{n(e,t,l.clean)}),"layoutHelper-"+e)},volantis.scroll={engine:new RunItem,unengine:new RunItem},volantis.scroll=Object.assign(volantis.scroll,{push:volantis.scroll.engine.push}),volantis.scroll.getScrollTop=()=>{let e;return window.pageYOffset?e=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},volantis.scroll.scrollHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},volantis.scroll.offsetHeight=function(){return Math.max(document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},volantis.scroll.progress=function(){return volantis.scroll.getScrollTop()/(volantis.scroll.scrollHeight()-volantis.scroll.offsetHeight())},volantis.scroll.handleScrollEvents=()=>{volantis.scroll.lastScrollTop=volantis.scroll.getScrollTop(),volantis.requestAnimationFrame((function e(){const t=volantis.scroll.getScrollTop();volantis.scroll.lastScrollTop!==t?(volantis.scroll.del=t-volantis.scroll.lastScrollTop,volantis.scroll.lastScrollTop=t,volantis.scroll.unengine.list=[],volantis.scroll.engine.start()):volantis.scroll.unengine.start(),volantis.requestAnimationFrame(e)}))},volantis.scroll.handleScrollEvents(),volantis.scroll.ele=null,volantis.scroll.to=(e,t={})=>{e&&(volantis.scroll.ele=e,opt={top:e.getBoundingClientRect().top+document.documentElement.scrollTop,behavior:"smooth"},"top"in t&&(opt.top=t.top),"behavior"in t&&(opt.behavior=t.behavior),"addTop"in t&&(opt.top+=t.addTop),"observerDic"in t||(t.observerDic=100),window.scrollTo(opt),t.observer&&setTimeout((()=>{volantis.scroll.ele==e&&volantis.scroll.unengine.push((()=>{let l=e.getBoundingClientRect().top;l>=-t.observerDic&&l<=t.observerDic||volantis.scroll.to(e,t),volantis.scroll.unengine.remove("unengineObserver")}),"unengineObserver")}),1e3))},volantis.cleanContentVisibility=()=>{document.querySelector(".post-story")&&(console.log("cleanContentVisibility"),document.querySelectorAll(".post-story").forEach((e=>{e.classList.remove("post-story")})))}</script><script>volantis.GLOBAL_CONFIG={root:"/",debug:!1,default:{avatar:"/img/default/avatar.svg",link:"/img/default/link.svg",cover:"/img/default/cover.svg",image:"/img/default/image.svg"},lastupdate:new Date(1729260745562),cdn:{izitoast_css:"https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/szyink/message.css",izitoast_js:"https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/szyink/message.js",fancybox_css:"https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/szyink/fancybox.css",fancybox_js:"https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/szyink/fancybox.umd.js"},sidebar:{for_page:["nextsite","nextblogger","tagcloud","notice","webinfo"],for_post:["nextsite","nextblogger","toc","webinfo","navigation"],webinfo:{lastupd:{enable:!0,friendlyShow:!0},runtime:{data:"2018/03/15",unit:"年"}}},plugins:{message:{enable:!1,icon:{default:"fa-light fa-info-circle light-blue",quection:"fa-light fa-question-circle light-blue"},time:{default:5e3,quection:2e4},position:"topRight",transitionIn:"bounceInLeft",transitionOut:"fadeOutRight",titleColor:"var(--color-text)",messageColor:"var(--color-text)",backgroundColor:"var(--color-card)",zindex:2147483647,copyright:{enable:!1,title:"知识共享许可协议",message:"请遵守 CC BY-NC-SA 4.0 协议。",icon:"fa-brands fa-creative-commons light-blue"},aplayer:{enable:!0,play:"fa-light fa-play light-blue",pause:"fa-light fa-pause light-blue",error:"fa-light fa-exclamation-square red"},rightmenu:{enable:!0,notice:!0}},rightmenus:{enable:!0,order:["plugins.navigation","hr","plugins.inputBox","plugins.seletctText","hr","plugins.elementCheck","plugins.elementImage","menus.prevNext","hr","menus.links","hr","menus.darkMode","plugins.articlePage"],options:{iconPrefix:"fa-light PETERRIVE",articleShowLink:!0,musicAlwaysShow:!0},plugins:{navigation:[{id:"left",name:"转到上一页",icon:"fa-light fa-arrow-left PETERRIVE",event:"history.back()",group:"navigation"},{id:"right",name:"转到下一页",icon:"fa-light fa-arrow-right PETERRIVE",event:"history.forward()",group:"navigation"},{id:"redo",name:"刷新当前页面",icon:"fa-light fa-redo PETERRIVE",event:"window.location.reload()",group:"navigation"},{id:"home",name:"回到首页",icon:"fa-light fa-home PETERRIVE",link:"/",group:"navigation"}],inputBox:[{id:"copyPaste",name:"粘贴文本",icon:"fa-light PETERRIVE fa-paste",event:"copyPaste",group:"inputBox"},{id:"copyAll",name:"全选文本",icon:"fa-light PETERRIVE fa-object-ungroup",event:"copyAll",group:"inputBox"},{id:"copyCut",name:"剪切文本",icon:"fa-light PETERRIVE fa-cut",event:"copyCut",group:"inputBox"}],seletctText:[{id:"copyText",name:"复制文本",icon:"fa-light PETERRIVE fa-copy",event:"copyText",group:"seletctText"},{id:"searchWord",name:"站内搜索",icon:"fa-light PETERRIVE fa-search",event:"OpenSearch(__text__)",group:"seletctText"},{id:"bingSearch",name:"必应搜索",icon:"fa-light PETERRIVE fa-search",event:"window.open(`https://cn.bing.com/search?q=${__text__}`)",group:"seletctText"}],elementCheck:[{id:"openTab",name:"新标签页打开",icon:"fa-light PETERRIVE fa-external-link-square-alt",event:"window.open(__link__)",group:"elementCheck"},{id:"copyLink",name:"复制链接地址",icon:"fa-light PETERRIVE fa-link",event:"copyLink",group:"elementCheck"}],elementImage:[{id:"copyImg",name:"复制图片文件",icon:"fa-light PETERRIVE fa-image",event:"copyImg",group:"elementImage"}],articlePage:[{id:"printMode",name:"打印页面",icon:"fa-light fa-print TURQUOISE",event:"printMode",group:"articlePage"},{id:"readMode",name:"阅读模式",icon:"fa-light fa-book-open EMERALD",event:"readMode",group:"articlePage"}]},menus:{link:[{id:"help",name:"常见问题",icon:"fa-solid fa-question",link:"https://volantis.js.org/faqs/",group:"link"},{id:"examples",name:"示例博客",icon:"fa-solid fa-rss",link:"https://volantis.js.org/examples/",group:"link"},{id:"contributors",name:"加入社区",icon:"fa-solid fa-fan",link:"https://volantis.js.org/contributors/",group:"link"},"hr",{id:"source_docs",name:"本站源码",icon:"fa-solid fa-code-branch",link:"https://github.com/volantis-x/volantis-docs/",group:"link"},{id:"source_theme",name:"主题源码",icon:"fa-solid fa-code-branch",link:"https://github.com/volantis-x/hexo-theme-volantis/",group:"link"}],darkMode:[{id:"darkMode",name:"暗黑模式",icon:"fa-light fa-eclipse-alt WISTERIA",event:"volantis.dark.toggle()",group:"darkMode"}],links:[{id:"friends",name:"我的朋友们",icon:"fa-light fa-flower-daffodil AMETHYST",link:"/page/friends/",group:"link"},{id:"archive",name:"文章归档",icon:"fa-light fa-globe-asia CONCRETE",link:"/archives/",group:"link"},{id:"categorie ",name:"文章分类",icon:"fa-light fa-folder-open ALIZARIN",link:"/categories/",group:"link"},{id:"about",name:"关于我",icon:"fa-light fa-gingerbread-man WISTERIA",link:"/page/about/",group:"link"},{id:"info",name:"留言板",icon:"fa-light fa-object-group ALIZARIN",link:"/page/info/",group:"link"}],prevNext:[{id:"prev",name:"查看上一篇",icon:"fa-light fa-angles-left PETERRIVE",event:"volantis.rightmenu.jump('prev')",group:"prevNext"},{id:"next",name:"查看下一篇",icon:"fa-light fa-angles-right PETERRIVE",event:"volantis.rightmenu.jump('next')",group:"prevNext"}]}}},search:{appId:"JS9FQWF0RD",indexName:"hexo-blog",apiKey:"cb83a0d50e2ca5117c227c54959839d2",hitsPerPage:"5",placeholder:"输关键词后「回车」搜索",searchAsYouType:!1},languages:{search:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}}}</script><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1/style.css"><script async defer="defer" data-website-id="ce840cfa-99c1-4abc-a304-9b377f904b50" src="https://um.adc.ink/szyinkum.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div id="l_body"><div id="safearea"><div class="body-wrapper"><div id="l_main" class><article itemscope itemtype="http://schema.org/Article" class="cus-indent article post white-box reveal md floatable article-type-post" id="post" itemprop="blogPost"><link itemprop="mainEntityOfPage" href="https://inkss.cn/post/76993423/"><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="枋柚梓的猫会发光"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/Post"><meta itemprop="name" content="枋柚梓的猫会发光"><meta itemprop="description" content="繁星永存，记忆亘古不变。"></span><span hidden><meta itemprop="image" content="icon/android-chrome-192x192.png"></span><div class="article-meta" id="top"><span hidden itemprop="name headline">Volantis 主题部署 Pjax</span></div><div id="layoutHelper-page-plugins"></div><div id="post-body" itemprop="articleBody"><p class="p center logo large"><em>Volantis 主题部署 Pjax <sup>应用篇</sup></em></p><br><br><p class="p center">前言：本篇定位于主题的各类处理上，理论篇见 <a href="/post/80b5f235/">Hexo 博客部署 Pjax 局部刷新</a>。</p><p class="p center">不多废话，那么，让我们开始吧！</p><h2 id="一、主题分析">一、主题分析</h2><h3 id="1-1-整体性分析">1.1 整体性分析</h3><p>在对主题做兼容时，最废心力的莫过于处理导航栏、封面这块，理论篇里已经分析过了，Pjax 需要重载的区域为文章主体和侧边栏，而封面、导航栏、页脚是不需要进行重载的。其中麻烦程度以导航栏为最，绑定了大量的按钮、事件等等，此外考虑到移动端适配的缘故，导航栏事实上是有两个存在的，均需要对其处理。</p><p>而封面部分，早期我没有过于考虑去处理封面，原因是这样的：导航栏是嵌入在封面里的（代码层面），在设置为全屏封面下时，存在了全屏、半屏和无封三种情况，控制起来略有些麻烦。而且存在一个导航栏出现时机的问题，需要计算出浏览器在什么滚动高度下才放出导航栏显示，此外导航栏上还放着嵌套的菜单，这部分通过循环渲染出来，使用 hover 伪类控制其显示，偏偏这种情况 Javascript 又不好处理，在无封面到有封面切换时留下了已经激活的菜单小尾巴。</p><p>至于页脚，目前唯一的动态数据为访问量的 PV 显示，这部分是直接由 class 定位赋值的，无需过多烦恼，倒是原主题中各个页脚的引用是分散的，需要统一抽离出来。这里插一嘴侧边栏，侧边栏因为是可配置项，从栏目到显示都是可配置的，过于麻烦，还是放在了重载区域内处理吧。</p><h3 id="1-2-插件分析">1.2 插件分析</h3><p>一个个来细数，大抵以下几种：搜索、评论、懒加载、图片弹出层、代码复制、背景幻灯片、音乐播放器、按钮涟漪动画、页面平滑滚动、公式、不蒜子计数、网址预加载等。</p><p>这其中，有些无需处理，有些简单的封装成函数重新调用一下即可，而有些则就需要特意分析处理了。除了以上几个插件外，主题里还有两个核心 JS 文件，一为 <code>app.js</code> ，另一为 <code>search.js</code>。这两个前者主要控制导航栏、按钮的激活等；后者则是用于搜索、渲染搜索结果查询等等。前者需要细致的处理，后者只需要修改下搜索结果列，点击搜索结果时，手动发送出一个 Pjax 请求，因为结果列是后期渲染的，没有在页面初始化时被 Pjax 监控到，需要手动发送跳转请求完成无刷新的跳转。</p><h2 id="二、插件的处理">二、插件的处理</h2><p>此部分，以几类特殊的插件作以说明，未提及者类似处理，相应文件主要位于 <em>_partial/scripts.ejs</em>。</p><h3 id="2-1-函数封装与调用">2.1 函数封装与调用</h3><p>如前文中所说，一些插件只需要封装成函数，在 Pjax 的 complete 事件中，重新调用即可；而另一些，单独的 JS 的文件引用，无额外函数设置的，只需要重新加载，以下简单介绍一番。</p><p>（1）Fancybox &amp; lazyload 此两者，均为对图像部分的处理，用于弹窗放大显示和懒加载，其中对 Fancybox 的处理是将初始化函数封装为函数，加载完成时重新调用一下即可，相关代码：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/inkss/volantis/blob/master-theme/layout/_third-party/fancybox.ejs">fancybox.ejs</a>（另：Fancybox 担任了图片描述信息的显示，已改为默认启用）。而 Lazyload 需要特殊处理，不过相关兼容已经解决，只需要确认自己的 <em>hexo-lazyload-image</em> 版本大于等于 <em>1.0.9</em> ，接着在全局配置文件下，为 lazyload 添加配置项： <code>isSPA: true</code>。</p><p>（2）不蒜子，用于文章/站点的计数，无各类配置项目，此类处理为在 JS 引用时加特殊标志 <code>data-pjax</code>，在 Pjax 的 complete 事件中，利用此标志将其移除，并重新加载，类似于：</p><figure class="highlight js"><figcaption><span>不蒜子</span></figcaption><table><tr><td class="code"><pre><span class="line marked">&lt;script defer src=<span class="string">&quot;&lt;%- theme.plugins.busuanzi %&gt;&quot;</span> data-pjax&gt;&lt;/script&gt;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">$(<span class="string">&#x27;script[data-pjax], .pjax-reload script&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>)</span><br><span class="line marked">  $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">append</span>($(<span class="variable language_">this</span>).<span class="title function_">remove</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>（3）Valine，对评论的处理就很有意思了，先谈谈 <em>scripts.ejs</em> 这个文件，与 <em>.js</em> 相比，它可以利用 Hexo 的函数引用主题配置或者页面中的 <em>Front-matter</em> 配置，这部分属性是在渲染阶段读取，并写入到 <em>html</em> 页面。而对于 Valine 来说，在本主题中，是允许不同页面自定义 placeholder 和 path 的，但是！这部分代码不在 Pjax 重加载区域内，也就是意味着丢失了这部分自定义值。自然而然，既然此处无法重载，那就放到能够重载到的位置。</p><p>这里我利用 ejs 的文件特征，建立了一个 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/inkss/volantis/blob/master-theme/layout/_third-party/pjaxdata.ejs">pjaxdata.ejs</a>，将一些值藏（<em>display: none</em>）在这里，写入到 div 标签中，通过 <code>$.trim($('#id').text()</code> 获取值。至于为什么不写成 <code>var xxx = &lt;%=xxx%&gt;</code> 的形式，那是因为在代码压缩时对于这类只声明不调用的变量，会被直接删掉的…</p><p>综上，对与动态的变量处理是这个样子的：</p><figure class="highlight js"><figcaption><span>pjax_valine()</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pjax_valine</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> valinePath = $.<span class="title function_">trim</span>($(<span class="string">&#x27;#valine-path&#x27;</span>).<span class="title function_">text</span>()) === <span class="string">&quot;none&quot;</span> ?</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> : $.<span class="title function_">trim</span>($(<span class="string">&#x27;#valine-path&#x27;</span>).<span class="title function_">text</span>());</span><br><span class="line">  <span class="keyword">var</span> valinePlaceholder = $.<span class="title function_">trim</span>($(<span class="string">&#x27;#valine-placeholder&#x27;</span>).<span class="title function_">text</span>()) === <span class="string">&quot;none&quot;</span> ?</span><br><span class="line">    <span class="string">&quot;&lt;%= theme.comments.valine.placeholder %&gt;&quot;</span> : $.<span class="title function_">trim</span>($(<span class="string">&#x27;#valine-placeholder&#x27;</span>).<span class="title function_">text</span>());</span><br><span class="line">  <span class="keyword">var</span> <span class="variable constant_">ALLPATH</span> = <span class="string">&#x27;&lt;%= theme.comments.valine.path %&gt;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(<span class="variable constant_">ALLPATH</span> != <span class="string">&#x27;&#x27;</span>) valinePath = <span class="variable constant_">ALLPATH</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> valine = <span class="keyword">new</span> <span class="title class_">Valine</span>();</span><br><span class="line">  valine.<span class="title function_">init</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#valine_container&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>: meta,</span><br><span class="line marked">    <span class="attr">placeholder</span>: valinePlaceholder,</span><br><span class="line marked">    <span class="attr">path</span>: valinePath,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  )&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（4）大部分插件都可以循着以上三个的思路完成兼容，更多内容可在 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/inkss/volantis/blob/master-theme/layout/_partial/scripts.ejs"><strong>scripts.ejs</strong></a> 查看。</p><h3 id="2-2-Pjax-事件">2.2 Pjax 事件</h3><p>说了第三方插件后，来谈谈 Pjax 本身吧，Pjax 在处理重载区域时，有一个要求，便是被重载部分必须为所有页面都存在（特指选择器），否则便会失败触发强制刷新。而在 Pjax 自带的四个事件中 <code>send</code> 、<code>complete</code> 、<code>success</code> 、<code>error</code> ，send 和 complete 可以用来处理一些函数的解绑与注册，此外还可以用来控制加载动画的显隐，error 可以在监听到失败时做个提醒呀之类的，success 用的不多，不是很需要。</p><p>这里附录一下本次兼容的 Pjax 函数内容吧：</p><details blue><summary>Pjax 函数</summary><div class="content"><figure class="highlight js"><figcaption><span>pjax 函数</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pjax;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  pjax = <span class="keyword">new</span> <span class="title class_">Pjax</span>(&#123;</span><br><span class="line">    <span class="attr">elements</span>: <span class="string">&#x27;a[href]:not([href^=&quot;#&quot;]):not([href=&quot;javascript:void(0)&quot;]):not([pjax-fancybox])&#x27;</span>,</span><br><span class="line">    <span class="attr">selectors</span>: [</span><br><span class="line">      <span class="string">&quot;title&quot;</span>,</span><br><span class="line">      <span class="string">&quot;#pjax-container&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">cacheBust</span>: <span class="literal">false</span>,   <span class="comment">// url 地址追加时间戳，用以避免浏览器缓存</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="string">&#x27;5000&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">stop</span>(); <span class="comment">// 相当于点击了浏览器的停止按钮</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">subData</span> = <span class="literal">null</span>; <span class="comment">// 移除标题（用于一二级导航栏切换处）</span></span><br><span class="line">  $.fancybox.<span class="title function_">close</span>();    <span class="comment">// 关闭弹窗</span></span><br><span class="line">  $(<span class="string">&#x27;.nav-main&#x27;</span>).<span class="title function_">find</span>(<span class="string">&#x27;.list-v&#x27;</span>).<span class="title function_">not</span>(<span class="string">&#x27;.menu-phone&#x27;</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>,<span class="string">&quot;none&quot;</span>); <span class="comment">// 移除小尾巴</span></span><br><span class="line">  $(<span class="string">&#x27;.menu-phone.list-v&#x27;</span>).<span class="title function_">css</span>(<span class="string">&quot;display&quot;</span>,<span class="string">&quot;none&quot;</span>); <span class="comment">// 移除小尾巴</span></span><br><span class="line">  $(<span class="string">&#x27;.l_header .switcher .s-search&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;active&#x27;</span>); <span class="comment">// 关闭移动端激活的搜索框</span></span><br><span class="line">  $(<span class="string">&#x27;.l_header&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;z_search-open&#x27;</span>); <span class="comment">// 关闭移动端激活的搜索框</span></span><br><span class="line">  $(<span class="string">&#x27;.wrapper&#x27;</span>).<span class="title function_">removeClass</span>(<span class="string">&#x27;sub&#x27;</span>); <span class="comment">// 跳转页面时关闭二级导航</span></span><br><span class="line">  $(<span class="variable language_">window</span>).<span class="title function_">unbind</span>(<span class="string">&#x27;resize&#x27;</span>);    <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="variable language_">window</span>).<span class="title function_">unbind</span>(<span class="string">&#x27;scroll&#x27;</span>);    <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="variable language_">window</span>).<span class="title function_">unbind</span>(<span class="string">&#x27;click&#x27;</span>);     <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="variable language_">document</span>).<span class="title function_">unbind</span>(<span class="string">&#x27;scroll&#x27;</span>);  <span class="comment">// 解绑</span></span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">start</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 关于百度统计对 SPA 页面的处理：</span></span><br><span class="line">  <span class="comment">// 方案一：百度统计&gt;管理&gt;单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324</span></span><br><span class="line">  <span class="comment">// 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235</span></span><br><span class="line">  <span class="comment">// &lt;% if (config.baidu_analytics_key) &#123; %&gt;</span></span><br><span class="line">  <span class="comment">// _hmt.push([&#x27;_trackPageview&#x27;, document.location.pathname]);</span></span><br><span class="line">  <span class="comment">// &lt;% &#125; %&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关于谷歌统计对 SPA 页面的处理：</span></span><br><span class="line">  <span class="comment">// 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。</span></span><br><span class="line">  <span class="comment">// https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn</span></span><br><span class="line">  &lt;% <span class="keyword">if</span> (config.<span class="property">google_analytics_key</span>) &#123; %&gt;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">dataLayer</span> = <span class="variable language_">window</span>.<span class="property">dataLayer</span> || [];</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">gtag</span>(<span class="params"></span>)&#123;dataLayer.<span class="title function_">push</span>(<span class="variable language_">arguments</span>);&#125;</span><br><span class="line">    <span class="title function_">gtag</span>(<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;&lt;%- config.google_analytics_key %&gt;&#x27;</span>, &#123;<span class="string">&#x27;page_path&#x27;</span>: <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">pathname</span>&#125;);</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  </span><br><span class="line">  $(<span class="string">&#x27;.nav-main&#x27;</span>).<span class="title function_">find</span>(<span class="string">&#x27;.list-v&#x27;</span>).<span class="title function_">not</span>(<span class="string">&#x27;.menu-phone&#x27;</span>).<span class="title function_">removeAttr</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>); <span class="comment">// 移除小尾巴的移除</span></span><br><span class="line">  $(<span class="string">&#x27;.menu-phone.list-v&#x27;</span>).<span class="title function_">removeAttr</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>); <span class="comment">// 移除小尾巴的移除</span></span><br><span class="line">  $(<span class="string">&#x27;script[data-pjax], .pjax-reload script&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">parent</span>().<span class="title function_">append</span>($(<span class="variable language_">this</span>).<span class="title function_">remove</span>());</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="title function_">pjax_fancybox</span>();</span><br><span class="line">    &lt;% <span class="keyword">if</span> (theme.<span class="property">plugins</span>.<span class="property">scrollreveal</span> &amp;&amp; theme.<span class="property">plugins</span>.<span class="property">scrollreveal</span>.<span class="property">js</span>) &#123; %&gt;</span><br><span class="line">      <span class="title function_">pjax_scrollrebeal</span>();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (theme.<span class="property">plugins</span>.<span class="property">clipboard</span> &amp;&amp; (theme.<span class="property">style</span>.<span class="property">body</span>.<span class="property">highlight</span>.<span class="property">copy_btn</span> == <span class="literal">true</span>)) &#123; %&gt;</span><br><span class="line">      <span class="title function_">pjax_initCopyCode</span>();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (enableValine)&#123; %&gt;</span><br><span class="line">      <span class="title function_">pjax_valine</span>();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (enableMiniValine)&#123; %&gt;</span><br><span class="line">      <span class="title function_">pjax_minivaline</span>();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:error&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = event.<span class="property">triggerElement</span>.<span class="property">href</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div></details><h2 id="三、主题核心代码处理">三、主题核心代码处理</h2><p>主要为两个 js 文件，内容很翔实，改动量不小，慢慢更新系列~</p><h3 id="3-1-搜索">3.1 搜索</h3><p>在前面我就说了，搜索结果是后期渲染上的，所以没有被 Pjax 整成自己的样子（哈哈），所以那些结果标签点过去立马来个刷新跳转，故此部分便只需要对这点处理下就行啦。这里需要利用 Pjax 的 <code>pjax.refresh([el])</code> 函数：</p><p>Use this method to bind Pjax to children of a DOM element that didn’t exist when Pjax was initialised e.g. content inserted dynamically by another library or script. If called with no arguments, Pjax will parse the entire document again to look for newly-inserted elements.</p><figure class="highlight js"><figcaption><span>refresh([el])</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// Inside a callback or Promise that runs after new DOM content has been inserted</span></span><br><span class="line"><span class="keyword">var</span> newContent = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.new-content&quot;</span>);</span><br><span class="line"></span><br><span class="line">pjax.<span class="title function_">refresh</span>(newContent);</span><br></pre></td></tr></table></figure><p>也就是重新加载 #u-search 区域，接着监听 send 事件，关闭搜索窗口：</p><figure class="highlight js"><figcaption><span>Pjax 处理</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">html += <span class="string">&quot;&lt;script&gt;try&#123;pjax.refresh(document.querySelector(&#x27;#u-search&#x27;))&#125;catch(e)&#123;console.log(e)&#125;&lt;/script&gt;&quot;</span>;</span><br><span class="line">html += <span class="string">&quot;&lt;script&gt;document.addEventListener(&#x27;pjax:send&#x27;,function()&#123;$(&#x27;#u-search&#x27;).fadeOut(500);$(&#x27;body&#x27;).removeClass(&#x27;modal-active&#x27;)&#125;);&lt;/script&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="3-2-导航栏">3.2 导航栏</h3><p>先放链接：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/inkss/volantis/blob/master-theme/source/js/app.js"><strong>app.js</strong></a>，看心情再决定补不补思路。</p><h3 id="3-3-封面">3.3 封面</h3><p>是这样的，原主题对封面的处理是通过读取页面配置来控制渲染，大概三种不同渲染场景，而在 Pjax 处理时简化为两种场景，全局不开启封面和开启封面，别的就通过代码来控制样式啦。样式处理无非是控制显示、隐藏，但是呢，还需要控制导航栏出现时机，这部分在上一小节讲。</p><figure class="highlight js"><figcaption><span>封面控制</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;none&quot;</span>) &#123;  <span class="comment">// 移除封面</span></span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;  </span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;l_body&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;nocover&quot;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;l_header&#x27;</span>,<span class="string">&#x27;cover-wrapper&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;show&quot;</span>); </span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;blog&quot;</span>) &#123;  <span class="comment">// 半屏</span></span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;full&quot;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;half&quot;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;scroll-down&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;docs&quot;</span>) &#123; <span class="comment">// 全屏</span></span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;half&quot;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;full&quot;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;scroll-down&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;l_body&#x27;</span>,<span class="string">&#x27;show&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;nocover&quot;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;l_header&#x27;</span>,<span class="string">&#x27;cover-wrapper&#x27;</span>)[<span class="number">0</span>].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>为了照顾显示效果，这部分处理是放在封面加载之后文章加载之前，好处是不会出现闪一下的效果（默认整个封面是隐藏的），坏处是此时 Jquery 没加载，得用原生 JS 来写。</p><h2 id="四、后续">四、后续</h2><p>没有后续，完结撒花~</p></div><div class="footer"><div class="copyright license"><div class="license-title">Volantis 主题部署 Pjax</div><div class="license-link"><a href="https://inkss.cn/post/76993423/">https://inkss.cn/post/76993423/</a></div><div class="license-meta"><div class="license-meta-item"><div class="license-meta-title">本文作者</div><div class="license-meta-text">枋柚梓</div></div><div class="license-meta-item"><div class="license-meta-title">发布于</div><div class="license-meta-text">2020年5月17日</div></div><div class="license-meta-item"><div class="license-meta-title">更新于</div><div class="license-meta-text">2020年6月2日</div></div><div class="license-meta-item"><div class="license-meta-title">许可协议</div><div class="license-meta-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh#" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 4.0</a></div></div></div><div class="license-statement">署名-非商业性使用-相同方式共享 4.0 国际。</div></div></div><div class="article-meta" id="bottom"><div class="new-meta-box"><div class="new-meta-item category"><i class="fa-light fa-folder-open EMERALD fa-fw" aria-hidden="true"></i> <a class="category-link" href="/categories/%E5%8D%9A%E5%AE%A2/">博客</a> <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%8D%9A%E5%AE%A2/" itemprop="url"><span itemprop="name">博客</span></a></span></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/Hexo/" rel="nofollow"><i class="fa-light fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>Hexo</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/Pjax/" rel="nofollow"><i class="fa-light fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>Pjax</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/Volantis/" rel="nofollow"><i class="fa-light fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>Volantis</p></a></div><span hidden itemprop="keywords">Hexo Pjax Volantis</span><div class="new-meta-item browse"><a class="notlink"><p><i class="fa-light fa-eye NEPHRITIS fa-fw" aria-hidden="true"></i><span id="busuanzi_value_page_pv"><i class="fa-solid fa-loader fa-spin fa-fw" aria-hidden="true"></i></span> <span>次浏览</span></p></a></div></div></div><div class="prev-next"><a class="prev" href="/post/481358a6/"><p class="title"><i class="fa-solid fa-chevron-left" aria-hidden="true"></i>记一次Ubuntu20.04LTS安装体验</p><p class="content">一、序言 我也算是用了很久的 Ubuntu 系统（这个很久大概是一两年左右），初接触在 Ubuntu 14 ，正式入坑为 16，18 退坑。对于 Ubuntu 来说，以日常使用的角度来说，自然首...</p></a><a class="next" href="/post/728c42d9/"><p class="title">城市天际线基础 MOD<i class="fa-solid fa-chevron-right" aria-hidden="true"></i></p><p class="content">一、前言 本文定位：记录一下基础的打底性质的 MOD，主要以功能性 MOD 为主，资产类的按照个人喜欢因人而异了，我会在列表中放入各个订阅的介绍、地址、展示等。另：同等功能下会尽可能的寻...</p></a></div></article><article class="post white-box floatable" id="comments"><span hidden><meta itemprop="discussionUrl" content="/post/76993423/#comments"></span><p ct><i class="fa-light fa-comments POMEGRANATE"></i> 评论</p><div id="layoutHelper-comments"></div></article></div><aside id="l_side" class="not-select default-cursor" itemscope itemtype="http://schema.org/WPSideBar"><section class="widget nextsite desktop mobile pjax"><div class="site-brand-wrapper"><div class="site-meta"><a href="/page/about/" class="brand" rel="start"><span class="site-title">枋柚梓的猫会发光</span></a><p class="site-subtitle" itemprop="description">繁星永存，记忆亘古不变。</p></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul class="next-main"><li class="next-main-item"><a href="/" title="- 首页 °| Home" active-action="action-home"><i class="menu-item-icon fa-light fa-home fa-fw"></i> - 首页 °| Home</a></li><li class="next-main-item"><a href="/page/notes/" title="- 笔记 °| Notes" active-action="action-pagenotes"><i class="menu-item-icon fa-light fa-notebook fa-fw"></i> - 笔记 °| Notes</a></li><li class="next-main-item"><a href="/archives/" title="- 归档 °| Archives" active-action="action-archives"><i class="menu-item-icon fa-light fa-archive fa-fw"></i> - 归档 °| Archives</a></li><li class="next-main-item"><a href="/page/info/" title="- 留言 °| Message" active-action="action-pageinfo"><i class="menu-item-icon fa-light fa-object-group fa-fw"></i> - 留言 °| Message</a></li><li class="next-main-item"><a href="/page/friends/" title="- 友链 °| Friends" active-action="action-pagefriends"><i class="menu-item-icon fa-light fa-link fa-fw"></i> - 友链 °| Friends</a></li><li class="next-main-item"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://me.szyink.com/" title="- 生活 °| Blogger" active-action="action-https:meszyinkcom"><i class="menu-item-icon fa-light fa-ghost fa-fw"></i> - 生活 °| Blogger</a></li><li class="next-main-item"><a href="https://www.foreverblog.cn/go.html" title="- 虫洞 °| Wormhole" active-action="action-https:wwwforeverblogcngohtml" target="_blank" rel="external nofollow noopener noreferrer"><i class="menu-item-icon fa-light fa-bullseye-pointer fa-fw"></i> - 虫洞 °| Wormhole</a></li><li class="next-main-item"><a href="javascript:void(0)" title="- 搜索 °| Search" active-action="action-javascript:void(0)" onclick="OpenSearch()"><i class="menu-item-icon fa-light fa-search fa-fw"></i> - 搜索 °| Search</a></li></ul></nav></section><section class="widget nextblogger desktop pjax"><div class="content"><a class="avatar flat-box" href="/page/about/"><img no-lazy class="site-author-image" itemprop="image" src="/img/avatar.png" alt="枋柚梓"></a><div class="site-author-box"><p class="site-author-name" itemprop="name">枋柚梓</p><p class="site-author-description" itemprop="description">言语道断，非物所拘。</p></div><div class="links-of-author"><span class="links-of-author-item"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/inkss" title="Github" alt="枋柚梓的猫会发光"><i class="fa-brands fa-github fa-fw"></i></a></span><span class="links-of-author-item"><a href="/page/atom/" title="RSS" alt="枋柚梓的猫会发光"><i class="fa-solid fa-rss fa-fw"></i></a></span><span class="links-of-author-item"><a href="/page/timeline/" title="History" alt="枋柚梓的猫会发光"><i class="fa-solid fa-history fa-fw"></i></a></span><span class="links-of-author-item"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://ut.adc.ink/status/me" title="Status" alt="枋柚梓的猫会发光"><i class="fa-solid fa-eye fa-fw"></i></a></span></div></div></section><section class="widget grid desktop pjax"><header><span class="icon"><i class="fa-light fa-map-signs POMEGRANATE fa-fw" aria-hidden="true"></i></span> <span class="name">站内导航</span></header><div class="content"><div class="grid navigation fixed"><a class="flat-box faa-parent animated-hover" href="/" active-action="action-home"><i class="fa-light fa-home fa-fw" aria-hidden="true"></i> 首页</a><a class="flat-box faa-parent animated-hover" href="/page/notes/" active-action="action-pagenotes"><i class="fa-light fa-notebook fa-fw" aria-hidden="true"></i> 笔记</a><a class="flat-box faa-parent animated-hover" href="/archives/" active-action="action-archives"><i class="fa-light fa-archive fa-fw" aria-hidden="true"></i> 归档</a><a class="flat-box faa-parent animated-hover" href="/page/info/" active-action="action-pageinfo"><i class="fa-light fa-object-group fa-fw" aria-hidden="true"></i> 留言</a><a class="flat-box faa-parent animated-hover" href="/page/friends/" active-action="action-pagefriends"><i class="fa-light fa-link fa-fw" aria-hidden="true"></i> 友链</a><a class="flat-box faa-parent animated-hover" href="/page/atom/" active-action="action-pageatom"><i class="fa-light fa-rss fa-fw" aria-hidden="true"></i> 订阅</a></div></div></section><div class="widget-sticky pjax"><section class="widget toc-wrapper desktop mobile" id="toc-div"><header><span class="icon"><i class="fa-light fa-list ASBESTOS fa-fw" aria-hidden="true"></i></span> <span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BB%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">一、主题分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%95%B4%E4%BD%93%E6%80%A7%E5%88%86%E6%9E%90"><span class="toc-text">1.1 整体性分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%8F%92%E4%BB%B6%E5%88%86%E6%9E%90"><span class="toc-text">1.2 插件分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8F%92%E4%BB%B6%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">二、插件的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85%E4%B8%8E%E8%B0%83%E7%94%A8"><span class="toc-text">2.1 函数封装与调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Pjax-%E4%BA%8B%E4%BB%B6"><span class="toc-text">2.2 Pjax 事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%BB%E9%A2%98%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-text">三、主题核心代码处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%90%9C%E7%B4%A2"><span class="toc-text">3.1 搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-text">3.2 导航栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%B0%81%E9%9D%A2"><span class="toc-text">3.3 封面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%90%8E%E7%BB%AD"><span class="toc-text">四、后续</span></a></li></ol></div></section><section class="widget desktop"><header><span class="icon"><i class="fa-light fa-award NEPHRITIS fa-fw" aria-hidden="true"></i></span> <span class="name">站点信息</span></header><div class="content"><div class="webinfo"><div class="webinfo-item"><div>文章数目：</div><div>57 篇</div></div><div class="webinfo-item"><div>已运行时间：</div><div id="webinfo-runtime-count" title="2018-03-15"></div></div><div class="webinfo-item"><div>本站总字数：</div><div>92.4k</div></div><div class="webinfo-item"><div>最后活动时间：</div><div id="last-update-show">2024-10-18 日</div></div></div></div></section></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div><div class="pjax"></div></aside><pjax><script>window.pdata={ispage:!0,commentPath:"",commentPlaceholder:"",commentConfig:{}}</script></pjax></div><footer class="footer clearfix" itemscope itemtype="http://schema.org/WPFooter"><br><br><div class="copyright"><p><span>© 2018 - 2024 </span><span><i class="fa-light fa-heartbeat POMEGRANATE faa-flash faa-slow animated"></i></span><span> 枋柚梓</span></p></div><div><p><a href="/page/policy/">政策</a> · <a target="_blank" rel="external nofollow noopener noreferrer" href="https://ut.adc.ink/status/me">状态</a> | 本站使用 <a href="https://volantis.js.org/" target="_blank" rel="external nofollow noopener noreferrer">Volantis</a> 主题设计</p></div></footer><a id="s-top" class="fa-solid fa-arrow-up fa-fw" title="top"></a></div></div><div><script>volantis.dom.bodyAnchor=volantis.dom.$(document.getElementById("safearea")),volantis.dom.topBtn=volantis.dom.$(document.getElementById("s-top")),volantis.dom.wrapper=volantis.dom.$(document.getElementById("wrapper")),volantis.dom.coverAnchor=volantis.dom.$(document.querySelector("#l_cover .cover-wrapper")),volantis.dom.switcher=volantis.dom.$(document.querySelector("#l_header .switcher .s-search")),volantis.dom.header=volantis.dom.$(document.getElementById("l_header")),volantis.dom.search=volantis.dom.$(document.querySelector("#l_header .m_search")),volantis.dom.mPhoneList=volantis.dom.$(document.querySelectorAll("#l_header .m-phone .list-v")),top.location!=self.location&&(top.location=self.location),volantis.css("https://cdn.jsdelivr.net/gh/inkss/fontawesome@6.1.0/css/all.min.css")</script><script src="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/app.js"></script><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa-light fa-arrow-left PETERRIVE fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa-light fa-arrow-right PETERRIVE fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa-light fa-redo PETERRIVE fa-fw"></i></a><a class="nav icon-only fix-cursor-default" href="/"><i class="fa-light fa-home PETERRIVE fa-fw"></i></a></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyPaste" data-event="copyPaste" data-group="inputBox"><i class="fa-light PETERRIVE fa-paste fa-fw"></i> 粘贴文本</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyAll" data-event="copyAll" data-group="inputBox"><i class="fa-light PETERRIVE fa-object-ungroup fa-fw"></i> 全选文本</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyCut" data-event="copyCut" data-group="inputBox"><i class="fa-light PETERRIVE fa-cut fa-fw"></i> 剪切文本</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyText" data-event="copyText" data-group="seletctText"><i class="fa-light PETERRIVE fa-copy fa-fw"></i> 复制文本</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="searchWord" data-event="OpenSearch(__text__)" data-group="seletctText"><i class="fa-light PETERRIVE fa-search fa-fw"></i> 站内搜索</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="bingSearch" data-event="window.open(`https://cn.bing.com/search?q=${__text__}`)" data-group="seletctText"><i class="fa-light PETERRIVE fa-search fa-fw"></i> 必应搜索</span></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="openTab" data-event="window.open(__link__)" data-group="elementCheck"><i class="fa-light PETERRIVE fa-external-link-square-alt fa-fw"></i> 新标签页打开</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyLink" data-event="copyLink" data-group="elementCheck"><i class="fa-light PETERRIVE fa-link fa-fw"></i> 复制链接地址</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="copyImg" data-event="copyImg" data-group="elementImage"><i class="fa-light PETERRIVE fa-image fa-fw"></i> 复制图片文件</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="prev" data-event="volantis.rightmenu.jump('prev')" data-group="prevNext"><i class="fa-light fa-angles-left PETERRIVE fa-fw"></i> 查看上一篇</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="next" data-event="volantis.rightmenu.jump('next')" data-group="prevNext"><i class="fa-light fa-angles-right PETERRIVE fa-fw"></i> 查看下一篇</span></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" id="friends" href="/page/friends/" data-group="link"><i class="fa-light fa-flower-daffodil AMETHYST fa-fw"></i> 我的朋友们</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" id="archive" href="/archives/" data-group="link"><i class="fa-light fa-globe-asia CONCRETE fa-fw"></i> 文章归档</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" id="categorie " href="/categories/" data-group="link"><i class="fa-light fa-folder-open ALIZARIN fa-fw"></i> 文章分类</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" id="about" href="/page/about/" data-group="link"><i class="fa-light fa-gingerbread-man WISTERIA fa-fw"></i> 关于我</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" id="info" href="/page/info/" data-group="link"><i class="fa-light fa-object-group ALIZARIN fa-fw"></i> 留言板</a></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="darkMode" data-event="volantis.dark.toggle()" data-group="darkMode"><i class="fa-light fa-eclipse-alt WISTERIA fa-fw"></i> 暗黑模式</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="printMode" data-event="printMode" data-group="articlePage"><i class="fa-light fa-print TURQUOISE fa-fw"></i> 打印页面</span></li><li class="menuLoad-Content"><span class="vlts-menu fix-cursor-default event" id="readMode" data-event="readMode" data-group="articlePage"><i class="fa-light fa-book-open EMERALD fa-fw"></i> 阅读模式</span></li></ul></div><script src="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/plugins/rightMenus.js"></script><script>const RightMenusFunction={searchWord:n=>{OpenSearch(n)},bingSearch:n=>{window.open(`https://cn.bing.com/search?q=${n}`)},openTab:n=>{window.open(n)},prev:()=>{volantis.rightmenu.jump("prev")},next:()=>{volantis.rightmenu.jump("next")},darkMode:()=>{volantis.dark.toggle()}}</script><script>const rootElement=document.documentElement,darkModeStorageKey="color-scheme",rootElementDarkModeAttributeName="color-scheme",setLS=(e,t)=>{localStorage.setItem(e,t)},removeLS=e=>{localStorage.removeItem(e)},getLS=e=>localStorage.getItem(e),getModeFromCSSMediaQuery=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",resetRootDarkModeAttributeAndLS=()=>{var e;rootElement.removeAttribute("color-scheme"),e="color-scheme",localStorage.removeItem(e)},validColorModeKeys={dark:!0,light:!0},applyCustomDarkModeSettings=e=>{const t=e||getLS("color-scheme");getCustomDarkMode(),t===getModeFromCSSMediaQuery()?resetRootDarkModeAttributeAndLS():validColorModeKeys[t]?rootElement.setAttribute("color-scheme",t):resetRootDarkModeAttributeAndLS()},invertDarkModeObj={dark:"light",light:"dark"},getCustomDarkMode=()=>{let e=getLS("color-scheme");if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}volantis.dark.mode="dark"==e?"light":"dark"},toggleCustomDarkMode=()=>{let e=getLS("color-scheme");if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}var t,o;return t="color-scheme",o=e,localStorage.setItem(t,o),e};function bindToggleButton(){document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn").forEach((function(e){volantis.dom.$(e).on("click",volantis.dark.toggle)}))}volantis.dark.toggle=()=>{const e=toggleCustomDarkMode();applyCustomDarkModeSettings(e),volantis.dark.method.toggle.start()},applyCustomDarkModeSettings(),document.addEventListener("DOMContentLoaded",(()=>{volantis.requestAnimationFrame(bindToggleButton)})),volantis.pjax.push(bindToggleButton);const darkModelListeners={dark:e=>{e.matches&&(volantis.dark.mode="dark"),volantis.dark.method.toggle.start()},light:e=>{e.matches&&(volantis.dark.mode="light"),volantis.dark.method.toggle.start()}};window.matchMedia("(prefers-color-scheme: dark)").addListener(darkModelListeners.dark),window.matchMedia("(prefers-color-scheme: light)").addListener(darkModelListeners.light)</script><script>volantis.layoutHelper("comments",'<div id="disqus_thread">\n    <div id="notShowDisqus" style="display: none;text-align: center;"><i class=\'fa-solid fa-exclamation-triangle\'></i>&nbsp;无法加载 Disqus 评论系统，请确保您的网络能够正常访问。</div>\n    <div id="load-btns"><a class="load-comments" onclick="needLoadDisqus()">点击加载 Disqus 评论</a></div>\n    <div id="loading-comments" style="display: none"><i class="fa fa-cog fa-spin fa-fw fa-2x"></i><br>正在检查 Disqus 能否访问...</div>\n  </div>\n  ');const disqus_shortname="inkss",autoload="true",global_url="https://inkss.cn";function checkDisqus(){return Promise.all([(e="inkss.disqus.com",new Promise(((o,n)=>{const s=new Image,t=setTimeout((()=>{s.onerror=s.onload=null,n()}),3e3);s.onerror=()=>{clearTimeout(t),n()},s.onload=()=>{clearTimeout(t),o()},s.src=`https://${e}/favicon.ico?${+new Date}=${+new Date}`})))]).then(loadDisqus,showError);var e}function loadDisqus(){let e=pdata.commentPath;if(0==e.length){e=""||decodeURI(window.location.pathname)}if(window.DISQUS)window.DISQUS.reset({reload:!0,config(){this.page.identifier=global_url+e,this.page.url=global_url+e}});else{window.disqus_config=function(){this.page.url=global_url+e,this.page.identifier=global_url+e};let o=document,n=o.createElement("script");n.async=!0,n.src="//"+disqus_shortname+".disqus.com/embed.js",n.setAttribute("data-timestamp",+new Date),(o.head||o.body).appendChild(n)}}function showError(){volantis.dom.$(document.getElementById("loading-comments")).hide(),volantis.dom.$(document.getElementById("notShowDisqus")).show()}function needLoadDisqus(){document.querySelectorAll("#layoutHelper-comments")[0]&&(checkDisqus(),volantis.dom.$(document.getElementById("load-btns")).hide(),volantis.dom.$(document.getElementById("loading-comments")).show())}function pjax_disqus(){document.getElementById("disqus_thread")&&(window.DISQUS?(volantis.dom.$(document.getElementById("load-btns")).hide(),volantis.dom.$(document.getElementById("notShowDisqus")).hide(),volantis.dom.$(document.getElementById("loading-comments")).hide(),loadDisqus()):needLoadDisqus())}needLoadDisqus(),volantis.pjax.push(pjax_disqus)</script><script defer="defer" src="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/bsz.js" data-pjax></script><script>async function loadSearchScript(){return await volantis.js("https://unpkg.com/algoliasearch@4.14.2/dist/algoliasearch-lite.umd.js"),await volantis.js("https://unpkg.com/instantsearch.js@4.44.0/dist/instantsearch.production.min.js"),volantis.js("https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/search/algolia.js")}function loadSearchService(){document.querySelectorAll(".input.u-search-input").forEach((e=>{e.removeEventListener("focus",loadSearchService,!1)})),document.querySelectorAll(".u-search-form").forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()}),!1)}))}function OpenSearch(e=""){"undefined"==typeof SearchService?loadSearchScript().then((()=>{SearchService.setQueryText(e),SearchService.search()})):(SearchService.setQueryText(e),SearchService.search())}if(loadSearchScript(),window.location.search&&/^\?s=/g.test(window.location.search)){OpenSearch(decodeURI(window.location.search).replace(/\ /g,"-").replace(/^\?s=/g,""))}document.querySelectorAll(".input.u-search-input").forEach((e=>{e.addEventListener("focus",loadSearchService,!1)}))</script><script>function pjax_highlightjs_copyCode(){(document.querySelector(".highlight .code pre")||document.querySelector(".article pre code"))&&VolantisApp.utilCopyCode(".highlight .code pre, .article pre code")}volantis.requestAnimationFrame(pjax_highlightjs_copyCode),volantis.pjax.push(pjax_highlightjs_copyCode)</script><script>setTimeout((function(){function a(){dataLayer.push(arguments)}volantis.js("https://www.googletagmanager.com/gtag/js?id=UA-126183911-1"),window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","UA-126183911-1")}),1e3),volantis.pjax.push((()=>{window.dataLayer=window.dataLayer||[],function(){dataLayer.push(arguments)}("config","UA-126183911-1",{page_path:document.location.pathname})}),"google_analytics")</script><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>volantis.js("https://sdk.51.la/js-sdk-pro.min.js").then((()=>{LA.init({id:"JgcVkXNZKtKny1eA",ck:"JgcVkXNZKtKny1eA",autoTrack:!0,hashMode:!1})}))</script><script>function load_swiper(){document.querySelectorAll(".swiper-container")[0]&&(volantis.css("https://cdn.bootcdn.net/ajax/libs/Swiper/8.3.2/swiper-bundle.min.css"),volantis.js("https://cdn.bootcdn.net/ajax/libs/Swiper/8.3.2/swiper-bundle.min.js").then((()=>{pjax_swiper()})))}function pjax_swiper(){volantis.swiper=new Swiper(".swiper-container",{slidesPerView:"auto",spaceBetween:8,centeredSlides:!0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}load_swiper(),volantis.pjax.push((()=>{document.querySelectorAll(".swiper-container")[0]&&(void 0===volantis.swiper?load_swiper():pjax_swiper())}))</script><pjax></pjax><script>function listenSidebarTOC(){const t=document.querySelectorAll(".toc li");if(!t.length)return;const e=[];Array.from(t).forEach((t=>{const n=t.querySelector(".toc-link"),i=document.getElementById(n.getAttribute("href")?decodeURI(n.getAttribute("href")).replace("#",""):n.getAttribute("toc-action").split("toc-")[1]);return e.push(i),n.getAttribute("href")&&(n.setAttribute("toc-action","toc-"+decodeURI(n.getAttribute("href")).replace("#","")),n.removeAttribute("href")),i&&i.id&&n.addEventListener("click",(t=>{t.preventDefault(),volantis.scroll.to(i,{addTop:5,observer:!0}),history.pushState(null,document.title,"#"+i.id)})),i}));function n(t){if(t.classList.contains("active-current"))return;document.querySelectorAll(".toc .active").forEach((t=>{t.classList.remove("active","active-current")})),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode}volantis.activateNavIndex=0,n(t[volantis.activateNavIndex]),e[0]&&volantis.scroll.push((()=>{if(e[0].getBoundingClientRect().top>=0)volantis.activateNavIndex=0;else if(e[e.length-1].getBoundingClientRect().top<0)volantis.activateNavIndex=e.length-1;else for(let t=0;t<e.length;t++){const n=e[t],i=e[(t+1)%e.length];if(n.getBoundingClientRect().top<0&&i.getBoundingClientRect().top>=0){volantis.activateNavIndex=t;break}}n(t[volantis.activateNavIndex])}))}document.addEventListener("DOMContentLoaded",(()=>{volantis.requestAnimationFrame(listenSidebarTOC)})),volantis.pjax.push(listenSidebarTOC)</script><script>document.onreadystatechange=function(){if("complete"==document.readyState){const{saveData:e,effectiveType:t}=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{};("none"==getComputedStyle(document.querySelector("#safearea"),null).display||e||/2g/.test(t))&&(document.querySelectorAll(".reveal").forEach((function(e){e.style.opacity="1"})),document.querySelector("#safearea").style.display="block")}}</script><script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"枋柚梓的猫会发光","url":"https://inkss.cn/","logo":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"枋柚梓","image":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png"},"url":"https://inkss.cn/","sameAs":["https://github.com/inkss"],"description":"繁星永存，记忆亘古不变。"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://inkss.cn/","name":"枋柚梓的猫会发光"}},{"@type":"ListItem","position":2,"item":{"@id":"https://inkss.cn//categories/博客/","name":"博客"}},{"@type":"ListItem","position":3,"item":{"@id":"https://inkss.cn/post/76993423/","name":"Volantis 主题部署 Pjax"}}]},{"@context":"http://schema.org","@type":"WebSite","name":"枋柚梓的猫会发光","url":"https://inkss.cn/","keywords":"枋柚梓,博客,Inkss","description":"繁星永存，记忆亘古不变。","author":{"@type":"Person","name":"枋柚梓","image":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png"},"url":"https://inkss.cn/","description":"繁星永存，记忆亘古不变。"},"publisher":{"@type":"Organization","name":"枋柚梓的猫会发光","url":"https://inkss.cn/","logo":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png","width":192,"height":192}},"potentialAction":{"@type":"SearchAction","name":"Site Search","target":{"@type":"EntryPoint","urlTemplate":"https://inkss.cn?s={search_term_string}"},"query-input":"required name=search_term_string"}},{"@context":"http://schema.org","@type":"BlogPosting","headline":"Volantis 主题部署 Pjax","description":"本篇文章记录了我对 Volantis 主题做 Pjax 兼容的种种，大抵算是种记录吧~","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https://inkss.cn/post/76993423/"},"author":{"@type":"Person","name":"枋柚梓","image":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png"},"url":"https://inkss.cn/"},"publisher":{"@type":"Organization","name":"枋柚梓的猫会发光","logo":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://inkss.cn/post/76993423/","wordCount":0,"datePublished":"2020-05-16T17:27:00.000Z","dateModified":"2020-06-02T06:18:00.000Z","articleSection":"博客","keywords":"Hexo,Pjax,Volantis","image":{"@type":"ImageObject","url":"icon/android-chrome-192x192.png","width":192,"height":192}}]</script><script src="https://cdn.jsdelivr.net/gh/inkss/inkss-cdn@main/js/szyink/iconfontInkss.js"></script></div><script>function isDateBetween(e,t){const n=new Date;return n>=new Date(e)&&n<new Date(t)}function checkLoaction(){const e=window.location.pathname,t=(new Date).getFullYear(),n=isDateBetween(`${t}/4/4`,`${t}/4/5`)||isDateBetween(`${t}/12/13`,`${t}/12/14`);"/"===e&&n?document.querySelector("html").classList.add("grayscale"):document.querySelector("html").classList.remove("grayscale")}volantis.rightmenu.jump=e=>{const t=document.querySelector("prev"===e?"article .prev-next a.prev":"article .prev-next a.next");t&&("undefined"!=typeof pjax?pjax.loadUrl(t.href):window.location.href=t.href)},volantis.rightmenu.handle((()=>{const e=document.querySelector("#prev").parentElement,t=document.querySelector("#next").parentElement,n=document.querySelector("article .prev-next a.prev p.title"),l=document.querySelector("article .prev-next a.next p.title");e.style.display=n?"block":"none",e.title=n?n.innerText:null,t.style.display=l?"block":"none",t.title=l?l.innerText:null}),"prevNext",!1),checkLoaction(),volantis.pjax.push(checkLoaction)</script></body></html>